# Schema documentation

Generated by MySQL Workbench Model Documentation v1.0.0 - Copyright (c) 2015 Hieu Le

## Table: `account`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `account_id` | BIGINT | PRIMARY, Auto increments, Not null, Unique |   |   |
| `create_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP` |   |
| `modified_date` | TIMESTAMP | Not null | `'0000-00-00 00:00:00'` |   |
| `create_account_id` | INT |  | `NULL` |   |
| `modified_account_id` | INT |  | `NULL` |   |
| `account` | VARCHAR(80) | Not null |   |   |
| `customer_id` | INT |  | `NULL` |   |
| `password` | VARCHAR(500) | Not null |   |   |
| `user_first_name` | VARCHAR(100) |  | `NULL` |   |
| `user_middle_name` | VARCHAR(100) |  | `NULL` |   |
| `user_last_name` | VARCHAR(100) |  | `NULL` |   |
| `email` | VARCHAR(100) |  | `NULL` |   |
| `mobile` | VARCHAR(100) |  | `NULL` |   |
| `role_id` | INT |  | `NULL` |   |
| `is_superuser` | TINYINT | Not null | `'0'` |   |
| `is_customer_root` | TINYINT | Not null | `'0'` |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `account_id` | PRIMARY |   |
| account_id | `account_id` | UNIQUE |   |


## Table: `clock_in_and_out`

### Description: 

上下班打卡log

### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | INT | PRIMARY, Auto increments, Not null |   |   |
| `account_id` | INT | Not null |   |   |
| `account` | VARCHAR(255) | Not null |   |   |
| `customer_id` | VARCHAR(50) | Not null |   |   |
| `clock_time` | DATETIME | Not null |   | 打卡時間 |
| `clock_type` | INT | Not null |   | 0:上班 / 1:下班 |
| `create_date` | TIMESTAMP |  | `CURRENT_TIMESTAMP` |   |
| `create_account_id` | INT | Not null |   |   |
| `clock_time_card_id` | INT | Not null |   |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id` | PRIMARY |   |


## Table: `clock_time_card`

### Description: 

上下班打卡

### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | INT | PRIMARY, Auto increments, Not null |   |   |
| `account_id` | INT | Not null |   |   |
| `garage_id` | INT | Not null |   |   |
| `customer_id` | VARCHAR(50) | Not null |   |   |
| `clock_in_time` | DATETIME | Not null |   | 上班時間 |
| `clock_out_time` | DATETIME | Not null |   | 下班時間 |
| `create_date` | TIMESTAMP |  | `CURRENT_TIMESTAMP` |   |
| `create_account_id` | INT | Not null |   |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id` | PRIMARY |   |


## Table: `commutation_ticket_config`

### Description: 

定期票票種管理

### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `commutation_ticket_config_id` | INT | PRIMARY, Auto increments, Not null |   |   |
| `commutation_ticket_config_name` | VARCHAR(60) | Not null |   | 票種名稱 |
| `unit_sales` | INT |  | `'0'` | 0:月, 1:天 |
| `sales_num` | INT |  | `NULL` | 單位數量,ex :5 就是5天或5個月 |
| `pay_amount` | INT |  | `NULL` | 一單位多少錢 |
| `vehicle_type` | VARCHAR(1) |  | `NULL` | 車種類別(0:腳踏車,1:機車,2:重機,3:小型汽車sedan,4:wagon,5:truck,6: bus) |
| `customer_id` | INT | Not null |   |   |
| `create_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP` |   |
| `update_date` | DATETIME |  | `NULL` |   |
| `create_account_id` | INT | Not null | `'0'` |   |
| `update_account_id` | INT |  | `NULL` |   |
| `is_active` | INT |  | `'1'` | 是否啟用 |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `commutation_ticket_config_id` | PRIMARY |   |
| commutation_ticket_config_id | `commutation_ticket_config_id` | INDEX |   |


## Table: `commutation_ticket_order`

### Description: 

定期票訂單

### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `commutation_ticket_order_id` | INT | PRIMARY, Auto increments, Not null |   |   |
| `card_id16` | VARCHAR(32) | Not null |   |   |
| `commutation_ticket_config_id` | INT | Not null |   |   |
| `begin_date` | DATETIME | Not null |   |   |
| `end_date` | DATETIME | Not null |   |   |
| `customer_garage_id` | VARCHAR(32) |  | `NULL` |   |
| `sale_amount` | INT | Not null |   |   |
| `buyer_name` | VARCHAR(30) | Not null |   |   |
| `telephone` | VARCHAR(30) | Not null |   |   |
| `cellphone` | VARCHAR(30) |  | `NULL` |   |
| `email` | VARCHAR(100) |  | `NULL` |   |
| `address` | VARCHAR(100) |  | `NULL` |   |
| `vehicle_plate_number` | VARCHAR(16) | Not null |   |   |
| `vehicle_color` | VARCHAR(16) |  | `NULL` |   |
| `notes` | VARCHAR(200) | Not null |   |   |
| `order_status` | INT | Not null | `'1'` | 1:售票, 2:註銷 |
| `create_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP` |   |
| `update_date` | DATETIME |  | `NULL` |   |
| `update_reason` | VARCHAR(200) |  | `NULL` |   |
| `create_account_id` | INT | Not null | `'0'` |   |
| `update_account_id` | INT |  | `NULL` |   |
| `garage_id` | INT | Not null |   |   |
| `customer_id` | INT | Not null |   |   |
| `unit_amount` | INT |  | `'1'` | 買了幾個單位數量 |
| `is_active` | INT |  | `'1'` | 是否啟用 |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `commutation_ticket_order_id` | PRIMARY |   |


## Table: `commutation_ticket_period_config`

### Description: 

定期票票種時段

### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `commutation_ticket_period_config_id` | INT | Auto increments, Not null |   |   |
| `days_of_the_week` | INT | PRIMARY, Not null |   | 星期幾 (0-6) |
| `time_begin1` | VARCHAR(10) | Not null |   | 開始時間1 |
| `time_end1` | VARCHAR(10) | Not null |   | 結束時間1 |
| `time_begin2` | VARCHAR(10) |  | `NULL` | 開始時間2 |
| `time_end2` | VARCHAR(10) |  | `NULL` | 結束時間2 |
| `create_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP` |   |
| `update_date` | DATETIME |  | `NULL` |   |
| `create_account_id` | INT | Not null | `'0'` |   |
| `update_account_id` | INT |  | `NULL` |   |
| `commutation_ticket_config_id` | INT | PRIMARY, Not null |   | 票種id |
| `is_active` | INT |  | `'1'` | 是否啟用 |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `days_of_the_week`, `commutation_ticket_config_id` | PRIMARY |   |
| commutation_ticket_period_config_id | `commutation_ticket_period_config_id` | INDEX |   |


## Table: `customer`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `customer_id` | BIGINT | PRIMARY, Auto increments, Not null, Unique |   |   |
| `create_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP` |   |
| `modified_date` | TIMESTAMP | Not null | `'0000-00-00 00:00:00'` |   |
| `create_account_id` | INT |  | `NULL` |   |
| `modified_account_id` | INT |  | `NULL` |   |
| `company_english_name` | VARCHAR(255) |  | `NULL` |   |
| `company_union_number` | VARCHAR(15) |  | `NULL` |   |
| `customer_code` | VARCHAR(150) | Not null |   |   |
| `company_name` | VARCHAR(150) | Not null |   |   |
| `contact_username` | VARCHAR(150) | Not null |   |   |
| `mobile` | VARCHAR(30) |  | `NULL` |   |
| `fax` | VARCHAR(30) |  | `NULL` |   |
| `phone_number1` | VARCHAR(30) |  | `NULL` |   |
| `phone_number2` | VARCHAR(30) |  | `NULL` |   |
| `email` | VARCHAR(100) |  | `NULL` |   |
| `customer_status` | INT |  | `NULL` | 閘門控制模式(1:active, 0:disabled) |
| `note` | VARCHAR(255) |  | `NULL` |   |
| `contact_availible_datetime` | VARCHAR(255) |  | `NULL` |   |
| `contact_datetime` | VARCHAR(10) |  | `NULL` |   |
| `company_address` | VARCHAR(255) |  | `NULL` |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `customer_id` | PRIMARY |   |
| customer_id | `customer_id` | UNIQUE |   |


## Table: `customer_ibox_args`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `customer_ibox_args_id` | INT | PRIMARY, Auto increments, Not null |   |   |
| `market_code` | VARCHAR(3) |  | `NULL` | 特約機構代碼 |
| `cashier_no` | VARCHAR(4) |  | `NULL` | 收銀員編號 |
| `system_id` | VARCHAR(2) |  | `NULL` | 交易系統編號 |
| `comp_id` | VARCHAR(2) |  | `NULL` | 停車場地點代碼/業者代碼 |
| `machine` | VARCHAR(8) |  | `NULL` | 交易機器編碼 |
| `ipass_water_lv_host` | VARCHAR(50) |  | `NULL` | 一卡通主機IP Host(須與主機端同步設定值須相同) |
| `ipass_water_lv_port` | INT |  | `NULL` | 一卡通水位參數(須與主機端同步設定值須相同) |
| `socket_ip` | VARCHAR(50) |  | `NULL` | 參數設定 正式帶入172.21.1.101 測試帶入10.20.1.74 |
| `transaction_system_id` | VARCHAR(2) |  | `NULL` | 交易系統編號 |
| `loc_id` | VARCHAR(2) |  | `NULL` | 公司代碼 |
| `transaction_terminal_no` | VARCHAR(8) |  | `NULL` | Terminal NO |
| `tid` | VARCHAR(8) |  | `NULL` | Terminal ID(BCD) |
| `mid` | VARCHAR(16) |  | `NULL` | 交易系統代碼 |
| `YHDP_water_lv` | INT |  | `NULL` | 水位參數 |
| `YHDP_water_lv_host` | VARCHAR(50) |  | `NULL` | 遠鑫主機IP Host(須與主機端同步設定值須相同) |
| `YHDP_water_lv_port` | INT |  | `NULL` | 遠鑫水位參數(須與主機端同步設定值須相同) |
| `nii` | INT |  | `NULL` | 參數設定 正式帶入0688 測試 0667 |
| `client_pv` | VARCHAR(50) |  | `NULL` | 設定同步時間 PV主機進站與出站IP |
| `time_sync_period` | INT |  | `NULL` | 週期 |
| `update_time` | DATETIME | Not null |   | 最後更新時間 |
| `update_user` | VARCHAR(200) |  | `NULL` | 最後更新使用者 |
| `customer_id` | INT |  | `NULL` |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `customer_ibox_args_id` | PRIMARY |   |


## Table: `customer_map_card_case`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `customer_map_card_case_id` | INT | PRIMARY, Auto increments, Not null |   |   |
| `device_type` | VARCHAR(20) |  | `NULL` | 設備類型 pad, pv3, iBox |
| `enable_card_case` | INT |  | `NULL` | 客戶啟用卡種 0: 全關, 1:愛金, 2:一卡, 3:有錢, 4:愛金.一卡, 5:愛金.有錢, 6:一卡.有錢 7:三卡 ...之後悠遊卡在往後加 |
| `customer_id` | INT |  | `NULL` |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `customer_map_card_case_id` | PRIMARY |   |


## Table: `customer_pv3_args`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `customer_pv3_args_id` | INT | PRIMARY, Auto increments, Not null |   |   |
| `market_code` | VARCHAR(3) |  | `NULL` | 特約機構代碼 |
| `cashier_no` | VARCHAR(4) |  | `NULL` | 收銀員編號 |
| `system_id` | VARCHAR(2) |  | `NULL` | 交易系統編號 |
| `comp_id` | VARCHAR(2) |  | `NULL` | 停車場地點代碼/業者代碼 |
| `machine` | VARCHAR(8) |  | `NULL` | 交易機器編碼 |
| `ipass_water_lv_host` | VARCHAR(50) |  | `NULL` | 一卡通主機IP Host(須與主機端同步設定值須相同) |
| `ipass_water_lv_port` | INT |  | `NULL` | 一卡通水位參數(須與主機端同步設定值須相同) |
| `socket_ip` | VARCHAR(50) |  | `NULL` | 參數設定 正式帶入172.21.1.101 測試帶入10.20.1.74 |
| `transaction_system_id` | VARCHAR(2) |  | `NULL` | 交易系統編號 |
| `loc_id` | VARCHAR(2) |  | `NULL` | 公司代碼 |
| `transaction_terminal_no` | VARCHAR(8) |  | `NULL` | Terminal NO |
| `tid` | VARCHAR(8) |  | `NULL` | Terminal ID(BCD) |
| `mid` | VARCHAR(16) |  | `NULL` | 交易系統代碼 |
| `YHDP_water_lv` | INT |  | `NULL` | 水位參數 |
| `YHDP_water_lv_host` | VARCHAR(50) |  | `NULL` | 遠鑫主機IP Host(須與主機端同步設定值須相同) |
| `YHDP_water_lv_port` | INT |  | `NULL` | 遠鑫水位參數(須與主機端同步設定值須相同) |
| `nii` | INT |  | `NULL` | 參數設定 正式帶入0688 測試 0667 |
| `client_pv` | VARCHAR(50) |  | `NULL` | 設定同步時間 PV主機進站與出站IP |
| `time_sync_period` | INT |  | `NULL` | 週期 |
| `update_time` | DATETIME | Not null |   | 最後更新時間 |
| `update_user` | VARCHAR(200) |  | `NULL` | 最後更新使用者 |
| `customer_id` | INT |  | `NULL` |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `customer_pv3_args_id` | PRIMARY |   |


## Table: `device_event`

### Description: 

設備訊息log

### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `device_event_id` | INT | PRIMARY, Auto increments, Not null |   |   |
| `event_category` | VARCHAR(30) | Not null |   | 事件群組 |
| `event_type` | VARCHAR(30) | Not null |   | 事件類型 |
| `message` | VARCHAR(2000) |  | `NULL` | 事件訊息 |
| `event_source` | VARCHAR(200) |  | `NULL` | 訊息來源 |
| `source_ip_address` | VARCHAR(20) |  | `NULL` | 來源IP |
| `field_01` | TEXT |  | `NULL` | 特定欄位01 |
| `field_02` | VARCHAR(200) |  | `NULL` | 特定欄位02 |
| `field_03` | VARCHAR(200) |  | `NULL` | 特定欄位03 |
| `field_04` | VARCHAR(200) |  | `NULL` | 特定欄位 |
| `field_05` | VARCHAR(200) |  | `NULL` | 特定欄位 |
| `update_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP` |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `device_event_id` | PRIMARY |   |
| device_event_id | `device_event_id` | INDEX |   |


## Table: `device_ibox`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `device_pv3_ibox_id` | INT | PRIMARY, Auto increments, Not null |   |   |
| `market_code` | VARCHAR(3) | Not null |   | 特約機構代碼 |
| `store_no` | VARCHAR(8) | Not null |   | 場站代碼 |
| `pos_no` | VARCHAR(3) | Not null |   | 立柱代碼 |
| `cashier_no` | VARCHAR(4) | Not null |   | 收銀員編號 |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `device_pv3_ibox_id` | PRIMARY |   |


## Table: `device_ibox_args`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `device_ibox_args_id` | INT | PRIMARY, Auto increments, Not null |   |   |
| `device_name` | VARCHAR(20) |  | `NULL` | 設備名稱 也是此設備資料夾名稱 |
| `external_ip` | VARCHAR(20) |  | `NULL` | ibox external ip bind for iPass |
| `car_in` | VARCHAR(200) |  | `NULL` | 此站所有進場ip |
| `car_out` | VARCHAR(200) |  | `NULL` | 此站所有出場ip |
| `station_inout` | INT |  | `NULL` | 該設置系統為進場或出場 1:in, 2:out |
| `ECC` | INT |  | `NULL` | 1為開啟SAM Card 讀取 0為關閉SAM Card讀取 |
| `iPass` | INT |  | `NULL` | 1為開啟SAM Card 讀取 0為關閉SAM Card讀取 |
| `iCash` | INT |  | `NULL` | 1為開啟SAM Card 讀取 0為關閉SAM Card讀取 |
| `YHDP` | INT |  | `NULL` | 1為開啟SAM Card 讀取 0為關閉SAM Card讀取 |
| `ip` | VARCHAR(200) |  | `NULL` | 設定該PV 主機IP 參數在開機時可以設定 IP Address |
| `mac_ip` | VARCHAR(20) |  | `NULL` | ibox mac ip |
| `eid_pos_no` | VARCHAR(20) |  | `NULL` | 立柱代碼 (for 發票EIDC 機制) 對應EIDC.txt 第三欄位 |
| `update_time` | DATETIME | Not null |   | 最後更新時間 |
| `update_user` | VARCHAR(200) |  | `NULL` | 最後更新使用者 |
| `garage_id` | INT |  | `NULL` |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `device_ibox_args_id` | PRIMARY |   |


## Table: `device_pv`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `device_pv_id` | INT | PRIMARY, Auto increments, Not null |   |   |
| `garage_id` | INT | Not null |   |   |
| `pv` | VARCHAR(128) | Not null, Unique |   |   |
| `type` | VARCHAR(1) | Not null |   |   |
| `pricing_scheme` | INT | Not null |   | 計費規則 |
| `pv_ip` | VARCHAR(64) | Not null |   |   |
| `pv_netmask` | VARCHAR(64) | Not null |   |   |
| `pv_gateway` | VARCHAR(64) | Not null |   |   |
| `pms_ip` | VARCHAR(64) | Not null |   |   |
| `pms_port` | INT | Not null |   |   |
| `ecc_ip` | VARCHAR(64) | Not null |   |   |
| `ecc_port` | INT | Not null |   |   |
| `in_out` | INT | Not null |   |   |
| `aisle` | VARCHAR(10) | Not null |   |   |
| `auto_print_invoice` | INT | Not null |   | 是否自動列印發票 0:不印, 1:要印 |
| `pv_cutoff` | VARCHAR(4) | Not null |   |   |
| `MEntryB` | VARCHAR(10) | Not null |   |   |
| `MExitD` | INT | Not null |   |   |
| `pv_version` | VARCHAR(20) | Not null |   |   |
| `last_response_time` | DATETIME | Not null | `'0000-00-00 00:00:00'` |   |
| `response_type` | VARCHAR(4) | Not null | `'00'` |   |
| `invoice_printer_status` | VARCHAR(2) | Not null | `'00'` | ref [invoice_printer_error_def].code |
| `pricing_scheme_disability` | INT | Not null | `'0'` | 身障計費規則 |
| `pv_response_confirm` | TINYINT | Not null | `'0'` | PV是否回傳confirm(1:是-新連線,0:否-舊連線 |
| `etag_flag` | TINYINT | Not null | `'0'` | 是否為eTag車道(1:是,0:否) |
| `costrule_using_para` | TINYINT | Not null | `'0'` | 計費規則是否使用參數化(1:是,0:否) |
| `lane_costrule_mode` | TINYINT | Not null | `'0'` | 車道計費模式(1:複合, 0:單一) |
| `gate_control_mode` | TINYINT | Not null | `'0'` | 閘門控制模式(0:維持, 1:開門) |
| `lpr_lane` | VARCHAR(4) | Not null | `'99'` | 車辨車道代碼 |
| `update_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP` |   |
| `update_account_id` | INT |  | `NULL` |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `device_pv_id` | PRIMARY |   |
| pv | `pv` | UNIQUE |   |
| type | `type` | INDEX |   |
| pricing_scheme | `pricing_scheme` | INDEX |   |
| pv_ip | `pv_ip` | INDEX |   |
| MEntryB | `MEntryB` | INDEX |   |
| in_out | `in_out` | INDEX |   |


## Table: `device_pv3_args`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `device_pv3_args_id` | INT | PRIMARY, Auto increments, Not null |   |   |
| `device_name` | VARCHAR(20) |  | `NULL` | 設備名稱 也是此設備資料夾名稱 |
| `external_ip` | VARCHAR(20) |  | `NULL` | ibox external ip bind for iPass |
| `car_in` | VARCHAR(200) |  | `NULL` | 此站所有進場ip |
| `car_out` | VARCHAR(200) |  | `NULL` | 此站所有出場ip |
| `station_inout` | INT |  | `NULL` | 該設置系統為進場或出場 1:in, 2:out |
| `ECC` | INT |  | `NULL` | 1為開啟SAM Card 讀取 0為關閉SAM Card讀取 |
| `iPass` | INT |  | `NULL` | 1為開啟SAM Card 讀取 0為關閉SAM Card讀取 |
| `iCash` | INT |  | `NULL` | 1為開啟SAM Card 讀取 0為關閉SAM Card讀取 |
| `YHDP` | INT |  | `NULL` | 1為開啟SAM Card 讀取 0為關閉SAM Card讀取 |
| `ip` | VARCHAR(200) |  | `NULL` | 設定該PV 主機IP 參數在開機時可以設定 IP Address |
| `mac_ip` | VARCHAR(20) |  | `NULL` | ibox mac ip |
| `eid_pos_no` | VARCHAR(20) |  | `NULL` | 立柱代碼 (for 發票EIDC 機制) 對應EIDC.txt 第三欄位 |
| `update_time` | DATETIME | Not null |   | 最後更新時間 |
| `update_user` | VARCHAR(200) |  | `NULL` | 最後更新使用者 |
| `garage_id` | INT |  | `NULL` |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `device_pv3_args_id` | PRIMARY |   |


## Table: `driveway`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `acer_id` | VARCHAR(5) | Not null |   | acer停車場編號 |
| `pv_name` | VARCHAR(128) | Not null |   | PV 名稱 |
| `type` | VARCHAR(1) | Not null |   | c:汽車道, m:機車道 |
| `charge_rule` | INT |  | `NULL` | 計費規則 |
| `pv_ip` | VARCHAR(64) | Not null |   | PV IP address |
| `pv_netmask` | VARCHAR(64) | Not null |   | PV Netmask address |
| `pv_gateway` | VARCHAR(64) |  | `NULL` | PV Default Gateway IP address |
| `pms_plus_ip` | VARCHAR(64) | Not null |   | PMS Plus IP |
| `pms_plus_port` | INT | Not null |   | PMS Plus Port |
| `direction` | INT | Not null |   | 車道方向 進或出車道 0:進, 1:出 |
| `aisle` | VARCHAR(10) | Not null |   | 車道碼 如1,2,3,4 (車道序號) |
| `is_invoice_printing_enabled` | INT | Not null |   | 是否自動列印發票 0:不印, 1:要印 |
| `pv_turn_off_time` | VARCHAR(4) | Not null |   | PV 的關機時間 Format: HHmm |
| `minimun_entry_balance` | VARCHAR(10) | Not null |   | 最小入場餘額 Format: 999.99 |
| `maximun_exit_buffer_minutes` | INT | Not null |   | 最長出場前緩衝時間 |
| `pv_version` | VARCHAR(20) | Not null |   | PV版本號碼 |
| `pv_last_response_time` | DATETIME | Not null |   | PV最後回應時間 |
| `pv_response_type` | VARCHAR(4) | Not null | `'00'` | PV回應類型 |
| `invoice_printer_status` | VARCHAR(2) | Not null | `'00'` | refer to [invoice_printer_error_def].code |
| `disability_charge_rule` | INT | Not null | `'0'` | 身障計費規則 |
| `is_etag_drvieway` | TINYINT | Not null | `'0'` | 是否為eTag車道(1:是,0:否) |
| `is_charge_params_enabled` | TINYINT | Not null | `'0'` | 計費規則是否使用參數化(1:是,0:否) |
| `driveway_charge_mode` | TINYINT | Not null | `'0'` | 車道計費模式(1:複合, 0:單一) |
| `gate_control_mode` | TINYINT | Not null | `'0'` | 閘門控制模式(0:維持, 1:開門) |
| `car_recognition_driveway_code` | VARCHAR(4) | Not null | `'99'` | 車辨車道代碼 |
| `driveway_id` | BIGINT | PRIMARY, Auto increments, Not null, Unique |   |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `driveway_id` | PRIMARY |   |
| driveway_id | `driveway_id` | UNIQUE |   |
| pv_name | `pv_name` | INDEX |   |
| type | `type` | INDEX |   |
| charge_rule | `charge_rule` | INDEX |   |
| pv_ip | `pv_ip` | INDEX |   |
| minimun_entry_balance | `minimun_entry_balance` | INDEX |   |
| direction | `direction` | INDEX |   |


## Table: `e_invoice_config`

### Description: 

電子發票設定 (電子發票標準化介面)

### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `e_invoice_config_id` | INT | PRIMARY, Auto increments, Not null |   | 流水號 |
| `invoicing_mode` | TINYINT | Not null | `'0'` | -1:預設未使用, 0:PMS->PV |
| `eidc_merchant_code` | VARCHAR(20) | Not null |   | EIDC用場站編號 |
| `merchant_id` | VARCHAR(20) | Not null |   | 場站編號 |
| `cashier_id` | VARCHAR(20) | Not null |   | 收銀機編號 |
| `garage_name` | VARCHAR(20) | Not null |   | 停車場名稱 |
| `pos_id` | VARCHAR(20) | Not null |   | acer的PMS場次編號 |
| `tax_id` | VARCHAR(10) | Not null |   | 賣方統編 |
| `qrcode_encrypt_key` | VARCHAR(32) | Not null | `'acer_pms_aes_key'` | 產生QR code的AES KEY |
| `set_execute_time` | DATETIME | Not null | `'2014-01-01 00:00:00'` |   |
| `txn_file_upload_flag` | TINYINT | Not null | `'1'` | 是否產生/更新交易檔案(0:否, 1:是) |
| `txn_file_upload_interval` | INT | Not null | `'30'` | 產生/更新交易檔案時間間隔 |
| `txn_file_import_folder` | VARCHAR(100) | Not null |   | 匯入交易檔案預設路徑 |
| `txn_file_upload_folder` | VARCHAR(100) | Not null |   | 產生/更新交易檔案預設路徑 |
| `txn_file_backup_folder` | VARCHAR(100) | Not null |   | 產生/更新交易檔案備份路徑 |
| `update_time` | DATETIME | Not null |   | 更新時間 |
| `update_user` | VARCHAR(100) | Not null |   | 更新使用者 |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `e_invoice_config_id` | PRIMARY |   |


## Table: `e_invoice_number_data`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `no` | BIGINT | Not null |   |   |
| `tax_id` | VARCHAR(10) | Not null |   | 統編 |
| `tax_id_buyer` | VARCHAR(10) |  | `NULL` | 買受人統編 |
| `random_code` | VARCHAR(4) | Not null |   | 隨機碼 |
| `use_year_month` | VARCHAR(6) | PRIMARY, Not null |   | yyyyMM |
| `invoice_number` | VARCHAR(20) | PRIMARY, Not null |   | 發票號碼 |
| `einvoice_print_status` | TINYINT | Not null | `'0'` | 0:印, 1:不印,2=存入載具,3=列印發票並打買受人統編 |
| `donate_status` | TINYINT | Not null | `'0'` | 捐贈狀態(0:不捐, 1:捐) |
| `sale_print_status` | TINYINT | Not null | `'0'` | 銷貨清單列印狀態(0:不印, 1:印) |
| `preserve_code` | VARCHAR(20) |  | `NULL` | 愛心碼 |
| `einvoice_device_no` | VARCHAR(20) |  | `NULL` | 載具編號 |
| `txn_total_amt` | INT | Not null | `'0'` | 交易金額 |
| `invoice_amt` | INT | Not null | `'0'` | 發票金額 |
| `txn_date` | VARCHAR(8) |  | `NULL` | YYYYMMDD |
| `txn_time` | VARCHAR(6) |  | `NULL` | HHMMSS |
| `merchant_id` | VARCHAR(20) | Not null |   | 商家代號 |
| `counter_id` | VARCHAR(20) | Not null |   | 門市(停車場)代號(舊PMS) |
| `pos_id` | VARCHAR(20) | Not null |   | 收銀機號 |
| `batch_number` | VARCHAR(6) |  | `NULL` | 批號(車道編號) |
| `transaction_number` | VARCHAR(6) |  | `NULL` | 收銀機交易序號 |
| `business_date` | VARCHAR(8) |  | `NULL` | 營業日 |
| `process_status` | TINYINT | Not null | `'0'` | 0:匯入, 1:銷售, 2:退貨(作廢), 3:折讓, 4:折讓取消, 5:註銷 |
| `process_time` | DATETIME | Not null | `'0000-00-00 00:00:00'` |   |
| `upload_status` | TINYINT | Not null | `'0'` | 0:未上傳, 1:待上傳, 2:已上傳 |
| `upload_time` | DATETIME | Not null | `'0000-00-00 00:00:00'` |   |
| `use_status` | TINYINT | Not null | `'0'` | 0:未使用, 1:已送出給PV |
| `use_time` | DATETIME | Not null | `'0000-00-00 00:00:00'` |   |
| `sales_type` | TINYINT | Not null | `'0'` | 0:parking id, 1:訂單 |
| `sales_id` | INT | Not null | `'0'` | parking id 或訂單id |
| `update_time` | DATETIME | Not null | `'0000-00-00 00:00:00'` |   |
| `update_user` | VARCHAR(100) | Not null |   |   |
| `source_filename` | VARCHAR(100) |  | `NULL` |   |
| `garage_code` | VARCHAR(20) |  | `NULL` |   |
| `csv_file_date` | VARCHAR(20) |  | `NULL` |   |
| `create_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP` |   |
| `garage_id` | INT | Not null |   |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `invoice_number`, `use_year_month` | PRIMARY |   |
| proccess_status | `process_status` | INDEX |   |
| upload_status | `upload_status` | INDEX |   |
| use_status | `use_status` | INDEX |   |
| sales_id | `sales_id` | INDEX |   |
| counter_index | `counter_id`, `tax_id`, `pos_id`, `merchant_id` | INDEX |   |


## Table: `einvoice_number_data`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `no` | BIGINT | Not null |   |   |
| `tax_id` | VARCHAR(10) | Not null |   | 統編 |
| `tax_id_buyer` | VARCHAR(10) |  | `NULL` | 買受人統編 |
| `random_code` | VARCHAR(4) | Not null |   | 隨機碼 |
| `use_year_month` | VARCHAR(6) | PRIMARY, Not null |   | yyyyMM |
| `invoice_number` | VARCHAR(20) | PRIMARY, Not null |   | 發票號碼 |
| `einvoice_use_status` | TINYINT | Not null | `'0'` | 電子發票使用狀態(1:不印, 0:印) |
| `donate_status` | TINYINT | Not null | `'0'` | 捐贈狀態(0:不捐, 1:捐) |
| `sale_print_status` | TINYINT | Not null | `'0'` | 銷貨清單列印狀態(0:不印, 1:印) |
| `preserve_code` | VARCHAR(20) |  | `NULL` | 愛心碼 |
| `einvoice_device_no` | VARCHAR(20) |  | `NULL` | 載具編號 |
| `txn_total_amt` | INT | Not null | `'0'` | 交易金額 |
| `invoice_amt` | INT | Not null | `'0'` | 發票金額 |
| `txn_date` | VARCHAR(8) |  | `NULL` | YYYYMMDD |
| `txn_time` | VARCHAR(6) |  | `NULL` | HHMMSS |
| `merchant_id` | VARCHAR(20) | Not null |   | 商家代號 |
| `counter_id` | VARCHAR(20) | Not null |   | 門市(停車場)代號 |
| `pos_id` | VARCHAR(20) | Not null |   | 收銀機號 |
| `batch_number` | VARCHAR(6) |  | `NULL` | 批號(車道編號) |
| `transaction_number` | VARCHAR(6) |  | `NULL` | 收銀機交易序號 |
| `business_date` | VARCHAR(8) |  | `NULL` | 營業日 |
| `process_status` | TINYINT | Not null | `'0'` | 0:匯入, 1:銷售, 2:退貨(作廢), 3:折讓, 4:折讓取消, 5:註銷 |
| `process_time` | DATETIME | Not null | `'0000-00-00 00:00:00'` |   |
| `upload_status` | TINYINT | Not null | `'0'` | 0:未上傳, 1:待上傳, 2:已上傳 |
| `upload_time` | DATETIME | Not null | `'0000-00-00 00:00:00'` |   |
| `use_status` | TINYINT | Not null | `'0'` | 0:未使用, 1:已送出給PV |
| `use_time` | DATETIME | Not null | `'0000-00-00 00:00:00'` |   |
| `sales_type` | TINYINT | Not null | `'0'` | 0:parking id, 1:訂單 |
| `sales_id` | INT | Not null | `'0'` | parking id 或訂單id |
| `update_time` | DATETIME | Not null | `'0000-00-00 00:00:00'` |   |
| `update_user` | VARCHAR(100) | Not null |   |   |
| `source_filename` | VARCHAR(100) |  | `NULL` |   |
| `garage_code` | VARCHAR(20) |  | `NULL` |   |
| `csv_file_date` | VARCHAR(20) |  | `NULL` |   |
| `create_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP` |   |
| `garage_id` | INT | Not null |   |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `invoice_number`, `use_year_month` | PRIMARY |   |
| proccess_status | `process_status` | INDEX |   |
| upload_status | `upload_status` | INDEX |   |
| use_status | `use_status` | INDEX |   |
| sales_id | `sales_id` | INDEX |   |
| counter_index | `counter_id`, `tax_id`, `pos_id`, `merchant_id` | INDEX |   |


## Table: `entry_gate`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `entry_gate_id` | BIGINT | PRIMARY, Auto increments, Not null, Unique |   |   |
| `create_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP` |   |
| `modified_date` | TIMESTAMP | Not null | `'0000-00-00 00:00:00'` |   |
| `create_account_id` | INT |  | `NULL` |   |
| `modified_account_id` | INT |  | `NULL` |   |
| `customer_id` | INT |  | `NULL` |   |
| `garage_id` | INT |  | `NULL` |   |
| `entry_gate_sn` | INT |  | `NULL` |   |
| `direction` | INT |  | `'1'` | entry_gate direction |
| `has_e_envoicing` | INT |  | `'1'` | using electronic envoice |
| `description` | VARCHAR(1000) |  | `NULL` |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `entry_gate_id` | PRIMARY |   |
| entry_gate_id | `entry_gate_id` | UNIQUE |   |


## Table: `event`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `event_id` | BIGINT | PRIMARY, Auto increments, Not null, Unique |   |   |
| `SystemEventType` | INT |  | `NULL` |   |
| `event_subtype` | INT |  | `NULL` |   |
| `description` | VARCHAR(255) |  | `NULL` |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `event_id` | PRIMARY |   |
| event_id | `event_id` | UNIQUE |   |


## Table: `exit_config`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `exit_config_id` | BIGINT | PRIMARY, Auto increments, Not null, Unique |   |   |
| `garage_id` | INT |  | `NULL` |   |
| `description` | VARCHAR(100) |  | `''` |   |
| `is_configured` | INT |  | `'0'` |   |
| `disabled` | INT |  | `'0'` |   |
| `update_account_id` | INT |  | `NULL` |   |
| `update_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP` |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `exit_config_id` | PRIMARY |   |
| exit_config_id | `exit_config_id` | UNIQUE |   |


## Table: `exit_settings`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | BIGINT | PRIMARY, Auto increments, Not null, Unique |   |   |
| `customer_id` | INT |  | `NULL` |   |
| `garage_name` | VARCHAR(255) |  | `NULL` |   |
| `garage_code` | VARCHAR(255) | Not null |   | Acer ITS defined garage code |
| `description` | VARCHAR(100) |  | `''` |   |
| `groups` | VARCHAR(20) | Not null |   |   |
| `isSetting` | INT |  | `'0'` |   |
| `disabled` | INT |  | `'0'` |   |
| `account` | VARCHAR(80) |  | `NULL` |   |
| `update_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP` |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id` | PRIMARY |   |
| id | `id` | UNIQUE |   |


## Table: `exit_type_config_detail`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `exit_type_config_detail_id` | BIGINT | PRIMARY, Auto increments, Not null, Unique |   |   |
| `exit_type` | VARCHAR(50) | Not null |   |   |
| `exit_config_id` | INT | Not null |   |   |
| `exit_type_disabled` | INT |  | `'0'` |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `exit_type_config_detail_id` | PRIMARY |   |
| exit_type_config_detail_id | `exit_type_config_detail_id` | UNIQUE |   |


## Table: `fee_para`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `fee_para_id` | INT | PRIMARY, Auto increments, Not null |   |   |
| `fee_para_mode` | VARCHAR(20) |  | `NULL` | 區分 平日 normal_day 還是假日 holiday |
| `hour_period_fee1` | INT |  | `NULL` | 區段一收費價格 |
| `hour_period_fee1_start` | INT |  | `NULL` | 區段一起始時間 |
| `hour_period_fee1_end` | INT |  | `NULL` | 區段一結束時間 |
| `hour_period_fee2` | INT |  | `NULL` | 區段二收費價格 |
| `hour_period_fee2_start` | INT |  | `NULL` | 區段二起始時間 |
| `hour_period_fee2_end` | INT |  | `NULL` | 區段二結束時間 |
| `max_fee` | INT |  | `NULL` | 最高收費價格 |
| `max_hour` | INT |  | `NULL` | 最高計費時數 |
| `special_rule` | INT |  | `NULL` | 特別費率模式 0:關閉特別費率 1:啟用(截尾模式) 2:啟用(推遲模式) |
| `special_fee_start` | INT |  | `NULL` | 特別費率起始時間 |
| `special_fee_end` | INT |  | `NULL` | 特別費率結束時間 |
| `special_fee_max` | INT |  | `NULL` | 特最高收費金額 |
| `special_fee_hour` | INT |  | `NULL` | 特別費率最高計費時數 |
| `monthly_pass` | INT |  | `NULL` | !! 目前尚未使用 都給0 !! 月票模式 0:關閉特別費率 1:啟用(截尾模式) 2:啟用(推遲模式) |
| `update_time` | DATETIME | Not null |   | 最後更新時間 |
| `update_user` | VARCHAR(200) |  | `NULL` | 最後更新使用者 |
| `fee_rule_id` | INT |  | `NULL` | 對應費率規則 PRIMARY KEY |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `fee_para_id` | PRIMARY |   |


## Table: `fee_rule`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `fee_rule_id` | INT | PRIMARY, Auto increments, Not null |   |   |
| `new_car_hour` | INT |  | `NULL` | 場站初始以小時計費的時數 |
| `period` | INT |  | `NULL` | 多少分鐘計費一次(層級低於new_car_hour 需要new_car_hour時數結束 才會開始計算period參數) |
| `normal_day` | VARCHAR(200) |  | `NULL` | 調整特定日期 設定為平日 |
| `holiday` | VARCHAR(200) |  | `NULL` | 調整特定日期 設定為假日 |
| `free_time` | INT |  | `NULL` | 贈送分鐘數 |
| `fee_mode` | INT |  | `NULL` | 費率計算模式 0: 當日最高計費模式 1: 24小時最高計費模式 2: 12小時最高計費模式 3: 單次計費模式 4: 單次計費(每天00:00:00重製) 5:單次計費(進場24小時後重製) 6:單次計費(進場12小時候重製) |
| `update_time` | DATETIME | Not null |   | 最後更新時間 |
| `update_user` | VARCHAR(200) |  | `NULL` | 最後更新使用者 |
| `garage_id` | INT |  | `NULL` | 對應場站PRIMARY KEY |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `fee_rule_id` | PRIMARY |   |


## Table: `garage`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `garage_code` | VARCHAR(10) | Not null |   | Acer ITS defined garage code |
| `garage_name` | VARCHAR(50) |  | `NULL` |   |
| `customer_id` | INT |  | `NULL` |   |
| `city_name` | VARCHAR(50) |  | `NULL` |   |
| `city_code` | VARCHAR(3) |  | `NULL` |   |
| `district` | VARCHAR(10) |  | `NULL` |   |
| `district_code` | VARCHAR(3) |  | `NULL` |   |
| `address1` | VARCHAR(255) |  | `NULL` |   |
| `address2` | VARCHAR(255) |  | `NULL` |   |
| `total_capacity` | INT |  | `'0'` |   |
| `sedan_capacity` | INT |  | `'0'` |   |
| `motocycle_capacity` | INT |  | `'0'` |   |
| `sedan_priority_pragnant_capacity` | INT |  | `'0'` |   |
| `motocycle_priority_pragnant_capacity` | INT |  | `'0'` |   |
| `sedan_priority_disability_capacity` | INT |  | `'0'` |   |
| `motocycle_priority_disability_capacity` | INT |  | `'0'` |   |
| `garage_lat` | VARCHAR(50) |  | `NULL` |   |
| `garage_lng` | VARCHAR(50) |  | `NULL` |   |
| `caculation_time_base_unit` | INT |  | `'0'` | 分:0/秒:1 |
| `charge_infomation` | VARCHAR(1000) |  | `NULL` |   |
| `supplementary_details` | VARCHAR(1000) |  | `NULL` |   |
| `business_hour_begin` | VARCHAR(5) |  | `NULL` |   |
| `business_hour_end` | VARCHAR(5) |  | `NULL` |   |
| `number_of_entrance` | INT |  | `'0'` |   |
| `number_of_exit` | INT |  | `'0'` |   |
| `number_of_driveway_in` | INT |  | `'0'` |   |
| `number_of_driveway_out` | INT |  | `'0'` |   |
| `management_type` | INT |  | `'0'` | 0:固定都有管理員/2:不定時巡視管理員/3:無管理員 |
| `garage_type` | INT |  | `NULL` | 0:平面、1:車塔、2:機械、3:平面/機械混合、4:地下室 |
| `lot_type` | INT |  | `NULL` | 室內還是室外停車場 室內:0/室外:1 |
| `establish_status` | INT |  | `NULL` | 建置狀態 完成:0/建置中:1 |
| `max_clearance` | VARCHAR(5) |  | `NULL` | 車高限制 |
| `on_site_liaison` | VARCHAR(20) |  | `NULL` | 現場聯絡人 |
| `on_site_phone` | VARCHAR(20) |  | `NULL` | 現場聯絡電話 |
| `on_site_email` | VARCHAR(20) |  | `NULL` | 現場email |
| `on_site_cell_phone` | VARCHAR(20) |  | `NULL` | 場站電話 |
| `customer_garage_id` | VARCHAR(20) |  | `NULL` | 客戶自己系統的場站id |
| `create_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP` |   |
| `modified_date` | TIMESTAMP | Not null | `'0000-00-00 00:00:00'` |   |
| `create_account_id` | INT |  | `NULL` |   |
| `modified_account_id` | INT |  | `NULL` |   |
| `garage_id` | BIGINT | PRIMARY, Auto increments, Not null, Unique |   |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `garage_id` | PRIMARY |   |
| garage_id | `garage_id` | UNIQUE |   |


## Table: `garage_ftp_info`

### Description: 

聯通各場站pms ftp 資料

### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `garage_code` | VARCHAR(20) | PRIMARY, Not null |   |   |
| `garage_name` | VARCHAR(20) | Not null |   | garage name |
| `ftp_ip` | VARCHAR(20) | Not null |   | ftp ip |
| `ftp_port` | VARCHAR(10) |  | `NULL` | ftp port |
| `ftp_userid` | VARCHAR(10) |  | `NULL` | fpt userid |
| `ftp_pwd` | VARCHAR(50) |  | `NULL` |   |
| `is_active` | TINYINT | Not null | `'0'` | 0:啟用 1:停用 |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `garage_code` | PRIMARY |   |
| garage_code | `garage_code` | INDEX |   |


## Table: `garage_group`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `garage_group_id` | BIGINT | PRIMARY, Auto increments, Not null, Unique |   |   |
| `create_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP` |   |
| `modified_date` | TIMESTAMP | Not null | `'0000-00-00 00:00:00'` |   |
| `create_account_id` | INT |  | `NULL` |   |
| `modified_account_id` | INT |  | `NULL` |   |
| `garage_group_name` | VARCHAR(255) |  | `NULL` |   |
| `customer_id` | INT |  | `NULL` |   |
| `parent_id` | INT |  | `NULL` |   |
| `description` | VARCHAR(1000) |  | `NULL` |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `garage_group_id` | PRIMARY |   |
| garage_group_id | `garage_group_id` | UNIQUE |   |


## Table: `garage_ibox_args`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `garage_ibox_args_id` | INT | PRIMARY, Auto increments, Not null |   |   |
| `garage_code` | VARCHAR(10) |  | `NULL` | Acer ITS defined garage code |
| `store_no` | VARCHAR(20) |  | `NULL` | 場站代碼 |
| `pos_no` | INT |  | `NULL` | pos代碼 目前是取該車道IP最後一碼 ex:192.168.200.203 -> 003 |
| `eid_store_no` | VARCHAR(20) |  | `NULL` | 此站所有出場ip |
| `plid` | VARCHAR(4) |  | `NULL` | 該設置系統為進場或出場 1:in, 2:out |
| `printer` | INT |  | `NULL` | 1為開啟SAM Card 讀取 0為關閉SAM Card讀取 |
| `tax_id_num` | VARCHAR(20) |  | `NULL` | 賣方統編 |
| `ntp_server` | VARCHAR(20) |  | `NULL` | 校時 |
| `update_time` | DATETIME | Not null |   | 最後更新時間 |
| `update_user` | VARCHAR(200) |  | `NULL` | 最後更新使用者 |
| `garage_id` | INT |  | `NULL` |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `garage_ibox_args_id` | PRIMARY |   |


## Table: `garage_pv3_args`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `garage_PV3_args_id` | INT | PRIMARY, Auto increments, Not null |   |   |
| `garage_code` | VARCHAR(10) |  | `NULL` | Acer ITS defined garage code |
| `store_no` | VARCHAR(20) |  | `NULL` | 場站代碼 |
| `pos_no` | INT |  | `NULL` | pos代碼 目前是取該車道IP最後一碼 ex:192.168.200.203 -> 003 |
| `eid_store_no` | VARCHAR(20) |  | `NULL` | 此站所有出場ip |
| `plid` | VARCHAR(4) |  | `NULL` | 該設置系統為進場或出場 1:in, 2:out |
| `printer` | INT |  | `NULL` | 1為開啟SAM Card 讀取 0為關閉SAM Card讀取 |
| `tax_id_num` | VARCHAR(20) |  | `NULL` | 賣方統編 |
| `ntp_server` | VARCHAR(20) |  | `NULL` | 校時 |
| `update_time` | DATETIME | Not null |   | 最後更新時間 |
| `update_user` | VARCHAR(200) |  | `NULL` | 最後更新使用者 |
| `garage_id` | INT |  | `NULL` |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `garage_PV3_args_id` | PRIMARY |   |


## Table: `garage_settings`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `settings_id` | BIGINT | PRIMARY, Auto increments, Not null, Unique |   |   |
| `settings_name` | VARCHAR(50) | Not null |   |   |
| `exit_settings_id` | INT | Not null |   |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `settings_id` | PRIMARY |   |
| settings_id | `settings_id` | UNIQUE |   |


## Table: `invoice_number_data`

### Description: 

發票交易資料

### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | INT | PRIMARY, Auto increments, Not null |   |   |
| `tax_id` | INT | Not null |   | 統編 |
| `use_year_month` | VARCHAR(10) | Not null |   | yyyyMM |
| `invoice_number` | VARCHAR(10) | Not null |   | 發票號碼 |
| `print_status` | INT |  | `NULL` | 發票使用狀態(1=列印紙本發票,2=存入載具,3=列印紙本發票並打買受人統編) |
| `donate_status` | INT |  | `NULL` | 捐贈狀態(0:不捐, 1:捐) |
| `preserve_code` | VARCHAR(15) |  | `NULL` | 愛心碼 |
| `einvoice_device_no` | VARCHAR(15) |  | `NULL` | 載具編號 |
| `total_amt` | INT |  | `NULL` | 交易金額 |
| `invoice_amt` | INT |  | `NULL` | 發票金額 |
| `merchant_id` | VARCHAR(15) |  | `NULL` | 商家代號 |
| `counter_id` | VARCHAR(15) |  | `NULL` | 門市(停車場)代號 |
| `pos_id` | VARCHAR(15) |  | `NULL` | 收銀機號 |
| `invoice_status` | INT |  | `NULL` | 1:銷售, 2:退貨(作廢), 3:折讓, 4:折讓取消, 5:註銷 |
| `upload_status` | INT |  | `NULL` | 0:未上傳, 1:待上傳, 2:已上傳 |
| `parking_id` | INT |  | `NULL` | table parking 對應ID |
| `random_code` | VARCHAR(15) |  | `NULL` | 隨機碼 |
| `transaction_number` | VARCHAR(15) |  | `NULL` | 收銀機交易序號 |
| `transaction_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP` | 交易時間 |
| `create_account_id` | INT | Not null |   |   |
| `create_date` | TIMESTAMP | Not null | `'0000-00-00 00:00:00'` | 建立時間 |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `id` | PRIMARY |   |


## Table: `keystore`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `keystore_id` | BIGINT | PRIMARY, Auto increments, Not null, Unique |   |   |
| `create_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP` |   |
| `modified_date` | TIMESTAMP | Not null | `'0000-00-00 00:00:00'` |   |
| `create_account_id` | INT |  | `NULL` |   |
| `modified_account_id` | INT |  | `NULL` |   |
| `customer_id` | INT |  | `NULL` |   |
| `key_version` | VARCHAR(150) | Not null |   |   |
| `key_type` | VARCHAR(150) |  | `NULL` |   |
| `fixed_account_total` | INT | Not null | `'1'` |   |
| `dynamic_account_total` | INT | Not null | `'1'` |   |
| `key_manager_email` | VARCHAR(255) | Not null |   |   |
| `service_type` | VARCHAR(30) | Not null |   |   |
| `note` | VARCHAR(255) |  | `NULL` |   |
| `start_date` | TIMESTAMP | Not null | `'0000-00-00 00:00:00'` |   |
| `end_date` | TIMESTAMP | Not null | `'0000-00-00 00:00:00'` |   |
| `key_status` | VARCHAR(30) | Not null |   |   |
| `key_validation_status` | VARCHAR(30) |  | `NULL` |   |
| `key_value` | VARCHAR(4000) | Not null |   |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `keystore_id` | PRIMARY |   |
| keystore_id | `keystore_id` | UNIQUE |   |


## Table: `lane`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `garage_lane_id` | INT | Not null |   |   |
| `pv` | VARCHAR(128) | Not null |   |   |
| `type` | VARCHAR(1) | Not null |   | 汽車道(c), 機車道(m) |
| `pricing_scheme` | INT | Not null |   | 計費規則 |
| `pv_ip` | VARCHAR(64) | Not null |   |   |
| `pv_netmask` | VARCHAR(64) | Not null |   |   |
| `pv_gateway` | VARCHAR(64) | Not null |   |   |
| `pms_ip` | VARCHAR(64) | Not null |   |   |
| `pms_port` | INT | Not null |   |   |
| `ecc_ip` | VARCHAR(64) | Not null |   |   |
| `ecc_port` | INT | Not null |   |   |
| `in_out` | INT | Not null |   | 進或出車道 0:進, 1:出 |
| `aisle` | VARCHAR(10) | Not null |   |   |
| `invoice` | INT | Not null |   | 是否自動列印發票 0:不印, 1:要印 |
| `cps_ip` | VARCHAR(64) | Not null |   |   |
| `pv_cutoff` | VARCHAR(4) | Not null |   | PV 的關機時間 Format: HHmm |
| `MEntryB` | VARCHAR(10) | Not null |   | 最小入場餘額 Format: 999.99 |
| `MExitD` | INT | Not null |   | 最長出場前緩衝時間 |
| `pv_version` | VARCHAR(20) | Not null |   |   |
| `last_response_time` | DATETIME | Not null | `'0000-00-00 00:00:00'` |   |
| `response_type` | VARCHAR(4) | Not null | `'00'` |   |
| `invoice_printer_status` | VARCHAR(2) | Not null | `'00'` | ref [invoice_printer_error_def].code |
| `pricing_scheme_disability` | INT | Not null | `'0'` | 身障計費規則 |
| `pv_response_confirm` | TINYINT | Not null | `'0'` | PV是否回傳confirm(1:是-新連線,0:否-舊連線 |
| `etag_flag` | TINYINT | Not null | `'0'` | 是否為eTag車道(1:是,0:否) |
| `costrule_using_para` | TINYINT | Not null | `'0'` | 計費規則是否使用參數化(1:是,0:否) |
| `lane_costrule_mode` | TINYINT | Not null | `'0'` | 車道計費模式(1:複合, 0:單一) |
| `gate_control_mode` | TINYINT | Not null | `'0'` | 閘門控制模式(0:維持, 1:開門) |
| `lpr_lane` | VARCHAR(4) | Not null | `'99'` | 車辨車道代碼 |
| `source_filename` | VARCHAR(100) |  | `NULL` |   |
| `garage_code` | VARCHAR(20) |  | `NULL` |   |
| `csv_file_date` | VARCHAR(20) |  | `NULL` |   |
| `create_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP` |   |
| `lane_id` | INT | PRIMARY, Auto increments, Not null |   |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `lane_id` | PRIMARY |   |
| type | `type` | INDEX |   |
| pricing_scheme | `pricing_scheme` | INDEX |   |
| pv_ip | `pv_ip` | INDEX |   |
| MEntryB | `MEntryB` | INDEX |   |
| in_out | `in_out` | INDEX |   |


## Table: `license_info`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `license_info_id` | BIGINT | PRIMARY, Auto increments, Not null, Unique |   |   |
| `create_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP` |   |
| `modified_date` | TIMESTAMP | Not null | `'0000-00-00 00:00:00'` |   |
| `create_account_id` | INT |  | `NULL` |   |
| `modified_account_id` | INT |  | `NULL` |   |
| `requested_keystore` | VARCHAR(2000) |  | `NULL` |   |
| `applied_keystore` | VARCHAR(2000) |  | `NULL` |   |
| `customer_id` | INT |  | `NULL` |   |
| `key_version` | VARCHAR(150) | Not null |   |   |
| `key_type` | VARCHAR(150) |  | `NULL` |   |
| `fixed_account_total` | INT | Not null | `'1'` |   |
| `dyanmic_account_total` | INT | Not null | `'1'` |   |
| `key_manager_email` | VARCHAR(255) | Not null |   |   |
| `service_type` | VARCHAR(30) | Not null |   |   |
| `note` | VARCHAR(255) |  | `NULL` |   |
| `start_date` | TIMESTAMP | Not null | `'0000-00-00 00:00:00'` |   |
| `end_date` | TIMESTAMP | Not null | `'0000-00-00 00:00:00'` |   |
| `key_status` | VARCHAR(30) | Not null |   |   |
| `key_string` | VARCHAR(2000) | Not null |   |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `license_info_id` | PRIMARY |   |
| license_info_id | `license_info_id` | UNIQUE |   |


## Table: `map_garage_group_to_account`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `garage_group_id` | INT |  | `NULL` |   |
| `account_id` | INT |  | `NULL` |   |




## Table: `map_garage_to_account`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `garage_id` | INT |  | `NULL` |   |
| `account_id` | INT |  | `NULL` |   |




## Table: `map_garage_to_garage_group`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `create_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP` |   |
| `modified_date` | TIMESTAMP | Not null | `'0000-00-00 00:00:00'` |   |
| `create_account_id` | INT |  | `NULL` |   |
| `modified_account_id` | INT |  | `NULL` |   |
| `garage_id` | INT |  | `NULL` |   |
| `garage_group_id` | INT |  | `NULL` |   |




## Table: `map_garage_to_system_config`

### Description: 

系統參數與停車廠站對應

### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `map_garage_to_system_config_id` | INT | PRIMARY, Not null |   |   |
| `garage_id` | INT |  | `NULL` | 停車場站編號 |
| `system_config_id` | INT |  | `NULL` | 系統設定編號 |
| `modified_account_id` | INT |  | `NULL` |   |
| `modified_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP` | 更新時間 |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `map_garage_to_system_config_id` | PRIMARY |   |


## Table: `map_role_permission`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `create_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP` |   |
| `modified_date` | TIMESTAMP | Not null | `'0000-00-00 00:00:00'` |   |
| `create_account_id` | INT |  | `NULL` |   |
| `modified_account_id` | INT |  | `NULL` |   |
| `role_id` | INT |  | `NULL` |   |
| `permission_id` | INT |  | `NULL` |   |




## Table: `map_station_to_account`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `create_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP` |   |
| `modified_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP` |   |
| `create_account_id` | INT |  | `NULL` |   |
| `modified_account_id` | INT |  | `NULL` |   |
| `station_id` | INT |  | `NULL` |   |
| `account_id` | INT |  | `NULL` |   |




## Table: `map_station_to_station_group`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `create_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP` |   |
| `modified_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP` |   |
| `create_account_id` | INT |  | `NULL` |   |
| `modified_account_id` | INT |  | `NULL` |   |
| `station_id` | INT |  | `NULL` |   |
| `station_group_id` | INT |  | `NULL` |   |




## Table: `parking`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `id` | INT |  | `NULL` | 舊PMS parking_id |
| `pv` | VARCHAR(32) | Not null |   |   |
| `pv_out` | VARCHAR(32) | Not null |   |   |
| `card_id` | VARCHAR(32) | Not null |   |   |
| `card_id16` | VARCHAR(32) | Not null |   |   |
| `enter_time` | DATETIME | Not null | `'0000-00-00 00:00:00'` |   |
| `exit_time` | DATETIME | Not null | `'0000-00-00 00:00:00'` |   |
| `paid_time` | DATETIME | Not null | `'0000-00-00 00:00:00'` |   |
| `duration` | INT | Not null | `'0'` |   |
| `fee` | INT | Not null | `'0'` |   |
| `real_fee` | INT | Not null | `'0'` |   |
| `note` | TEXT | Not null |   |   |
| `paid_type` | VARCHAR(2) | Not null | `'00'` |   |
| `entry_balance` | INT | Not null | `'0'` | 進場時卡片餘額 |
| `exit_balance` | INT | Not null | `'0'` | 出場時卡片餘額(扣款前) |
| `settlement_type` | TINYINT | Not null | `'0'` | 1:待確認交易,2:ECC補寫log |
| `txn_datetime` | DATETIME | Not null | `'0000-00-00 00:00:00'` | 待確認PV交易時間 |
| `txn_amt` | INT | Not null | `'0'` | 待確認交易金額 |
| `disability_mode` | TINYINT | Not null | `'0'` | 是否為身障計費(1:是,0:否) |
| `card_autoload_flag` | TINYINT | Not null | `'0'` | 卡片自動加值FLAG |
| `entry_mode` | TINYINT | Not null | `'1'` | 進場設備放行類別(0:無法辨識, 1:PV, 2:eTag, 3: 河南OBU, 4:車辨設備系統) |
| `last_source_filename` | VARCHAR(100) |  | `NULL` |   |
| `garage_code` | VARCHAR(20) |  | `NULL` |   |
| `last_csv_file_date` | VARCHAR(20) |  | `NULL` |   |
| `parking_id` | BIGINT | PRIMARY, Auto increments, Not null, Unique |   |   |
| `create_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP` |   |
| `vehicle_identification_number` | VARCHAR(10) |  | `'000-0000'` |   |
| `modified_date` | DATETIME |  | `NULL` | 資料修改日期 |
| `vehicle_type` | INT |  | `NULL` | 車類型 0:unknown,1:汽車,2:機車,3:卡車,4:腳踏車,5:沙石車,6:小貨車,7:休旅車,8:箱型車,9:電動機車,10:電動汽車,11:大客車,12:小巴,13:拖板車 |
| `enter_account_id` | INT |  | `NULL` | 入場紀錄帳號 |
| `exit_account_id` | INT |  | `NULL` | 出場紀錄帳號 |
| `einvoice` | VARCHAR(20) |  | `NULL` | 電子發票號碼 |
| `einvoice_print_status` | TINYINT |  | `NULL` | 發票狀態列印 (1=列印紙本發票,2=存入載具,3=列印紙本發票並打買受人統編) |
| `record_status` | TINYINT |  | `'1'` | 此紀錄狀態 (1 = 正常, 0＝作廢（退費）) |
| `garage_id` | INT |  | `NULL` | 場站ID |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `parking_id` | PRIMARY |   |
| parking_id | `parking_id` | UNIQUE |   |


## Table: `parking_in_out_record`

### Description: 

PMS交易紀錄

### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `parking_in_out_record_id` | INT | Not null |   |   |
| `state` | VARCHAR(2) | Not null |   | 進離場類別(0:進場、1:離場) |
| `trans_type` | VARCHAR(2) | Not null |   | 臨時車或月租車(0:臨停車、1:月租車) |
| `card_id` | VARCHAR(32) | Not null |   | 票卡卡號(如:票證卡片卡號、停車卡卡號、token ID) |
| `entry_time` | DATETIME | Not null |   | 進場日期時間 |
| `exit_time` | DATETIME | Not null |   | 離場日期時間 |
| `car_number` | VARCHAR(16) | Not null |   | 車牌號碼 |
| `parking_id` | INT | Not null |   | -->parking id |
| `paid_type` | VARCHAR(2) | Not null |   | 使用方式(票證、token、車辨...) |
| `update_time` | DATETIME | Not null |   | 更新時間 |
| `update_user` | VARCHAR(100) | Not null |   | 更新人員 |
| `source_filename` | VARCHAR(100) |  | `NULL` |   |
| `garage_code` | VARCHAR(20) |  | `NULL` |   |
| `csv_file_date` | VARCHAR(20) |  | `NULL` |   |
| `create_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP` |   |
| `no` | INT | PRIMARY, Auto increments, Not null |   | 流水號 |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `no` | PRIMARY |   |


## Table: `permission`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `permission_id` | BIGINT | PRIMARY, Auto increments, Not null, Unique |   |   |
| `create_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP` |   |
| `modified_date` | TIMESTAMP | Not null | `'0000-00-00 00:00:00'` |   |
| `create_account_id` | INT |  | `NULL` |   |
| `modified_account_id` | INT |  | `NULL` |   |
| `name` | VARCHAR(50) | Not null |   |   |
| `description` | VARCHAR(255) |  | `NULL` |   |
| `permission_type` | VARCHAR(10) | Not null |   |   |
| `parent_id` | INT |  | `NULL` |   |
| `enable` | INT |  | `'1'` |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `permission_id` | PRIMARY |   |
| permission_id | `permission_id` | UNIQUE |   |


## Table: `pv3_log`

### Description: 

pv3錯誤及時訊息

### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `pv3_log_id` | INT | PRIMARY, Auto increments, Not null |   |   |
| `customer_id` | INT |  | `NULL` |   |
| `customer_garage_code` | VARCHAR(20) |  | `NULL` |   |
| `garage_code` | VARCHAR(20) |  | `NULL` |   |
| `ip_address` | VARCHAR(20) |  | `NULL` |   |
| `mac_address` | VARCHAR(20) |  | `NULL` |   |
| `category` | VARCHAR(20) |  | `NULL` | 自訂分類 |
| `log_type` | VARCHAR(20) |  | `NULL` | 自訂類型 |
| `message` | VARCHAR(20) |  | `NULL` | 標準訊息 |
| `field_1` | VARCHAR(20) |  | `NULL` | 自訂訊息1 |
| `field_2` | VARCHAR(20) |  | `NULL` |   |
| `field_3` | VARCHAR(20) |  | `NULL` |   |
| `field_4` | VARCHAR(50) |  | `NULL` |   |
| `field_5` | VARCHAR(2000) |  | `NULL` |   |
| `create_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP` |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `pv3_log_id` | PRIMARY |   |
| pv3_log_id | `pv3_log_id` | INDEX |   |


## Table: `real_time_transaction_data`

### Description: 

即時交易資料

### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `real_time_transaction_data_id` | INT | PRIMARY, Auto increments, Not null |   | 即時交易資料ID |
| `in_or_out` | INT | Not null |   | 進離場類別(0:進場、1:離場) |
| `parking_type` | INT | Not null | `'0'` | 臨時車或月租車(0:臨停車、1:月租車) |
| `card_id_16` | VARCHAR(30) | Not null |   | 票卡卡號(如:票證卡片卡號、停車卡卡號、token ID)(卡內碼mifire) |
| `in_or_out_datetime` | DATETIME | Not null |   | 進/出場日期時間 (ex. 201801082359) |
| `pay_datetime` | DATETIME |  | `NULL` | 付費時間(ex. 201801082359) |
| `card_type` | INT |  | `NULL` | 卡別(01:ECC,02:愛金,03:KRTC, /遠鑫:05 /99:人工結帳….). |
| `receivable` | INT |  | `NULL` | 應收費用 |
| `real_fees` | INT |  | `NULL` | 實際費用 |
| `before_pay_balance` | INT |  | `NULL` | 卡片餘額(扣款前) |
| `is_disability` | INT |  | `'0'` | 是否為身障計費(>0:身障計費規則id  0:否) |
| `vehicle_identification_number` | VARCHAR(10) | Not null |   | 車牌號碼 |
| `device_ip` | VARCHAR(15) | Not null |   | device_ip |
| `garage_id` | INT |  | `NULL` | 場站代碼(acer define) |
| `customer_id` | INT |  | `NULL` | 業者代碼(acer define) |
| `discount_type` | INT |  | `'0'` | 0: 無優惠，1: 身障優惠，2: 折扣優惠 |
| `discount_amount` | INT |  | `NULL` | 優惠金額 |
| `status_number` | INT | Not null |   | 狀態碼，交易正常:0 異常:1 |
| `vehicle_type` | INT | Not null |   | 車種 0:unknown,1:汽車,2:機車,3:卡車,4:腳踏車,5:沙石車,6:小貨車,7:休旅車,8:箱型車,9:電動機車,10:電動汽車,11:大客車,12:小巴,13:拖板車 |
| `einvoice` | VARCHAR(15) |  | `NULL` | 電子發票號碼 |
| `einvoice_print_status` | INT |  | `NULL` | 發票狀態列印 (1=列印紙本發票,2=存入載具,3=列印紙本發票並打買受人統編) |
| `tax_id_number` | VARCHAR(15) |  | `NULL` | 公司統編 |
| `tax_id_number_buyer` | VARCHAR(15) |  | `NULL` | 買受人統編 |
| `card_id_appearance` | VARCHAR(30) | Not null |   | 卡片卡號(卡片外碼) |
| `is_autoload` | INT | Not null | `'0'` | 是否開啟自動加值功能(1:開啟,0:無) |
| `autoload_amout` | INT | Not null | `'0'` | 自動加值金額 (default:0) |
| `error_message` | VARCHAR(500) | Not null | `''` | 錯誤訊息(default:'') |
| `parking_id` | INT | Not null |   | Parking資料ID |
| `create_account_id` | INT |  | `NULL` |   |
| `create_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP` | create_date |
| `exit_type_config_detail_id` | INT |  | `NULL` | 出場設定id |
| `exit_type_config_detail_remarks` | VARCHAR(50) |  | `NULL` | 出場設定備註 |
| `ibox_no` | INT |  | `NULL` | IBox所使用的流水號 |
| `record_status` | INT |  | `'1'` | 此紀錄狀態,0:作廢,1:正常 |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `real_time_transaction_data_id` | PRIMARY |   |


## Table: `role`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `role_id` | BIGINT | PRIMARY, Auto increments, Not null, Unique |   |   |
| `create_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP` |   |
| `modified_date` | TIMESTAMP | Not null | `'0000-00-00 00:00:00'` |   |
| `create_account_id` | INT |  | `NULL` |   |
| `modified_account_id` | INT |  | `NULL` |   |
| `name` | VARCHAR(50) | Not null |   |   |
| `description` | VARCHAR(255) |  | `NULL` |   |
| `role_type` | VARCHAR(30) | Not null |   |   |
| `is_system_role` | INT |  | `'0'` | 只有is_superuser =1 的帳號才能夠選擇的角色 |
| `customer_id` | INT |  | `NULL` |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `role_id` | PRIMARY |   |
| role_id | `role_id` | UNIQUE |   |


## Table: `setting_exit_type`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `setting_id` | BIGINT | PRIMARY, Auto increments, Not null, Unique |   |   |
| `exit_type` | VARCHAR(50) | Not null |   |   |
| `exit_settings_id` | INT | Not null |   |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `setting_id` | PRIMARY |   |
| setting_id | `setting_id` | UNIQUE |   |


## Table: `shift_checkout`

### Description: 

平板結班資料

### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `checkout_no` | VARCHAR(20) | Not null |   | 結班條序號 |
| `data_in_json` | VARCHAR(1000) | Not null |   | 結班資料in json type |
| `garage_id` | INT | Not null |   | 場站ID |
| `customer_id` | INT | Not null |   | 業者ID |
| `clock_in_time` | DATETIME | Not null |   | 班別開始時間 |
| `clock_out_time` | DATETIME | Not null |   | 班別結束時間 |
| `checkout_time` | DATETIME | Not null |   | 結班時間 |
| `checkout_amount` | INT | Not null |   | 結帳（實收）金額 |
| `number_of_vehicles` | INT | Not null |   | 出場車輛數 |
| `create_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP` |   |
| `create_account_id` | INT | Not null |   |   |
| `shift_checkout_id` | INT | PRIMARY, Auto increments, Not null |   |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `shift_checkout_id` | PRIMARY |   |


## Table: `station`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `station_id` | BIGINT | PRIMARY, Auto increments, Not null, Unique |   |   |
| `create_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP` |   |
| `modified_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP` |   |
| `create_account_id` | INT |  | `NULL` |   |
| `modified_account_id` | INT |  | `NULL` |   |
| `station_code` | VARCHAR(255) | Not null |   | station code |
| `station_name` | VARCHAR(255) |  | `NULL` |   |
| `customer_id` | INT |  | `NULL` |   |
| `city_name` | VARCHAR(255) |  | `NULL` |   |
| `city_code` | VARCHAR(3) |  | `NULL` |   |
| `district` | VARCHAR(10) |  | `NULL` |   |
| `district_code` | VARCHAR(3) |  | `NULL` |   |
| `address1` | VARCHAR(255) |  | `NULL` |   |
| `address2` | VARCHAR(255) |  | `NULL` |   |
| `sedan_capacity` | INT |  | `'0'` |   |
| `motocycle_capacity` | INT |  | `'0'` |   |
| `sedan_priority_pragnant_capacity` | INT |  | `'0'` |   |
| `motocycle_priority_pragnant_capacity` | INT |  | `'0'` |   |
| `sedan_priority_disability_capacity` | INT |  | `'0'` |   |
| `motocycle_priority_disability_capacity` | INT |  | `'0'` |   |
| `business_hours` | INT |  | `'0'` |   |
| `station_lat` | VARCHAR(255) |  | `NULL` |   |
| `station_lng` | VARCHAR(255) |  | `NULL` |   |
| `station_total_entries` | INT |  | `'0'` |   |
| `caculation_time_base_unit` | INT |  | `'0'` |   |
| `description` | VARCHAR(1000) |  | `NULL` |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `station_id` | PRIMARY |   |
| station_id | `station_id` | UNIQUE |   |


## Table: `station_group`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `station_group_id` | BIGINT | PRIMARY, Auto increments, Not null, Unique |   |   |
| `create_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP` |   |
| `modified_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP` |   |
| `create_account_id` | INT |  | `NULL` |   |
| `modified_account_id` | INT |  | `NULL` |   |
| `station_group_name` | VARCHAR(255) |  | `NULL` |   |
| `customer_id` | INT |  | `NULL` |   |
| `parent_id` | INT |  | `NULL` |   |
| `description` | VARCHAR(1000) |  | `NULL` |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `station_group_id` | PRIMARY |   |
| station_group_id | `station_group_id` | UNIQUE |   |


## Table: `system_config`

### Description: 

系統參數

### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `report_title` | VARCHAR(60) | Not null |   | 報表名稱 |
| `is_usb_mode_active` | TINYINT | Not null | `'0'` |   |
| `usb_version_id` | VARCHAR(4) | Not null |   |   |
| `pv_voice_value` | VARCHAR(2) | Not null | `'0'` | PV調整音量大小 |
| `entry_balance_warning` | INT | Not null | `'0'` | 進場餘額警示水位 |
| `is_commutation_ticket_module_active` | TINYINT | Not null | `'0'` | 定期票功能(1:啟用, 0:停用) |
| `commutation_ticket_sales_type` | TINYINT | Not null | `'0'` | 1:只有汽車,2:只有機車,3:汽車+機車 |
| `is_transfer_module_active` | TINYINT | Not null | `'0'` | 轉乘優惠功能(1:啟用,0:停用) |
| `is_e_invoice_mode` | TINYINT | Not null | `'0'` | 是否使用電子發票 |
| `e_invoice_request_minimum` | INT | Not null | `'0'` | 電子發票發動取號的最低數量 |
| `is_java_server_mode` | TINYINT | Not null | `'0'` | 是否為java socket server mode |
| `pv_alert_interval` | INT | Not null | `'0'` | PV警告狀態顯示檢查間隔(單位:秒) |
| `monitor_response_time` | INT | Not null |   | 監控不回應時間警示(單位:分鐘) |
| `is_calculator_parking_data` | TINYINT | Not null | `'0'` | 更新PMS交易資料清分狀態 |
| `is_check_accounting_and_email_notify` | TINYINT | Not null | `'0'` | 自動對帳與發送通知 |
| `is_support_multi_language` | TINYINT | Not null | `'0'` | 是否開啟多國語言選取功能(1:是, 0:否) |
| `is_customize_disability_column_name` | TINYINT | Not null | `'0'` | 身障計費試算欄位名稱是否客製(0:否, 1:是) |
| `is_invoice_record_number_mode` | TINYINT | Not null | `'0'` | 是否啟用傳統發票號碼記錄 |
| `invoice_paperroll_usable_number` | INT | Not null | `'0'` | 發票紙捲可用張數 |
| `invoice_alert_usable_number` | INT | Not null | `'0'` | 發票紙捲剩餘張數警告通知 |
| `is_commuter_ticket_check_entry_balance` | TINYINT | Not null | `'0'` | 定期票進場是否檢查最低入場餘額 |
| `is_fee_caculation_by_config` | TINYINT | Not null | `'0'` | 計費規則參數化設定(1:啟用, 0:停用) |
| `is_human_pay_and_confirm_fix` | TINYINT | Not null | `'0'` | 支援[人工結帳已付款]和[已扣款未回confirm狀態]旗標判定 |
| `is_auto_add_value_card_check_entry_balance` | TINYINT | Not null | `'0'` | 自動加值卡片檢查最低入場餘額(0:關,1:開) |
| `e_invoice_service_provider` | TINYINT | Not null | `'0'` | 1:ChiefPay, 2:台灣聯通, 3:電子發票標準化介面 |
| `is_support_gate_control` | TINYINT | Not null | `'0'` | 是否支援遠端開閘 |
| `acer_id` | VARCHAR(10) |  | `NULL` |   |
| `config_name` | VARCHAR(60) |  | `NULL` |   |
| `csv_file_date` | VARCHAR(10) |  | `NULL` | 解析csv檔案內容的資料來源日期 |
| `modified_account_id` | INT |  | `NULL` |   |
| `modified_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP` | 更新時間 |
| `system_config_id` | BIGINT | PRIMARY, Auto increments, Not null, Unique |   |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `system_config_id` | PRIMARY |   |
| system_config_id | `system_config_id` | UNIQUE |   |


## Table: `system_configuration`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `key` | VARCHAR(50) | PRIMARY, Not null |   | 系統配置名稱 |
| `value` | VARCHAR(50) | Not null |   | 系統配置值 |
| `description` | VARCHAR(100) | Not null |   | 用途描述 |
| `config_group_name` | VARCHAR(50) | Not null |   | 系統配置群組名稱 |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `key` | PRIMARY |   |


## Table: `system_log`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `system_log_id` | BIGINT | PRIMARY, Auto increments, Not null, Unique |   |   |
| `event_id` | INT |  | `NULL` |   |
| `create_account_id` | INT |  | `NULL` |   |
| `create_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP` |   |
| `event_message` | VARCHAR(255) |  | `NULL` |   |
| `query_string` | VARCHAR(255) |  | `NULL` |   |
| `field_1` | VARCHAR(255) |  | `NULL` |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `system_log_id` | PRIMARY |   |
| system_log_id | `system_log_id` | UNIQUE |   |


## Table: `system_parameter`

### Description: 

系統參數

### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `system_config_id` | INT | PRIMARY, Not null |   |   |
| `report_title` | VARCHAR(60) | Not null |   | 報表名稱 |
| `is_usb_mode_active` | TINYINT | Not null | `'0'` |   |
| `usb_version_id` | VARCHAR(4) | Not null |   |   |
| `pv_voice_value` | VARCHAR(2) | Not null | `'60'` | PV調整音量大小 |
| `entry_balance_warning` | INT | Not null | `'100'` | 進場餘額警示水位 |
| `is_commutation_ticket_module_active` | TINYINT | Not null | `'0'` | 定期票功能(1:啟用, 0:停用) |
| `commutation_ticket_sales_type` | TINYINT | Not null | `'3'` | 1:只有汽車,2:只有機車,3:汽車+機車 |
| `is_transfer_module_active` | TINYINT | Not null | `'0'` | 轉乘優惠功能(1:啟用,0:停用) |
| `is_e_invoice_mode` | TINYINT | Not null | `'0'` | 是否使用電子發票 |
| `e_invoice_request_minimum` | INT | Not null | `'50'` | 電子發票發動取號的最低數量 |
| `is_java_server_mode` | TINYINT | Not null | `'0'` | 是否為java socket server mode |
| `pv_alert_interval` | INT | Not null | `'30'` | PV警告狀態顯示檢查間隔(單位:秒) |
| `monitor_response_time` | INT | Not null |   | 監控不回應時間警示(單位:分鐘) |
| `is_calculator_parking_data` | TINYINT | Not null | `'0'` | 更新PMS交易資料清分狀態 |
| `is_check_accounting_and_email_notify` | TINYINT | Not null | `'0'` | 自動對帳與發送通知 |
| `is_support_multi_language` | TINYINT | Not null | `'0'` | 是否開啟多國語言選取功能(1:是, 0:否) |
| `is_customize_disability_column_name` | TINYINT | Not null | `'0'` | 身障計費試算欄位名稱是否客製(0:否, 1:是) |
| `is_invoice_record_number_mode` | TINYINT | Not null | `'0'` | 是否啟用傳統發票號碼記錄 |
| `invoice_paperroll_usable_number` | INT | Not null | `'250'` | 發票紙捲可用張數 |
| `invoice_alert_usable_number` | INT | Not null | `'5'` | 發票紙捲剩餘張數警告通知 |
| `is_commuter_ticket_check_entry_balance` | TINYINT | Not null | `'0'` | 定期票進場是否檢查最低入場餘額 |
| `is_fee_caculation_by_config` | TINYINT | Not null | `'0'` | 計費規則參數化設定(1:啟用, 0:停用) |
| `is_human_pay_and_confirm_fix` | TINYINT | Not null | `'0'` | 支援[人工結帳已付款]和[已扣款未回confirm狀態]旗標判定 |
| `is_auto_add_value_card_check_entry_balance` | TINYINT | Not null | `'0'` | 自動加值卡片檢查最低入場餘額(0:關,1:開) |
| `e_invoice_service` | TINYINT | Not null | `'1'` | 1:ChiefPay, 2:台灣聯通 |
| `is_support_gate_control` | TINYINT | Not null | `'0'` | 是否支援遠端開閘 |
| `modify_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP` | 更新時間 |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `system_config_id` | PRIMARY |   |


## Table: `ticket_provider`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `ticket_provider_id` | BIGINT | PRIMARY, Auto increments, Not null, Unique |   |   |
| `company_name` | VARCHAR(32) | Not null |   |   |
| `type_id` | VARCHAR(32) | Not null |   |   |
| `ticket_provider_code` | VARCHAR(32) | Not null |   | Acer ITS 定義票證業者代碼 |
| `provider_garage_code` | VARCHAR(10) |  | `NULL` | 場站編號(悠遊卡,一卡通) |
| `provider_transaction_code` | VARCHAR(10) |  | `NULL` | 交易系統代碼(一卡通) |
| `provider_system_code` | VARCHAR(32) |  | `NULL` | 交易車種代碼(一卡通) |
| `provider_transfer_code` | VARCHAR(32) |  | `NULL` | 系統轉乘代碼(一卡通) |
| `modified_account_id` | INT |  | `NULL` |   |
| `modified_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP` |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `ticket_provider_id` | PRIMARY |   |
| ticket_provider_id | `ticket_provider_id` | UNIQUE |   |


## Table: `trx_data`

### Description: 



### Columns: 

| Column | Data type | Attributes | Default | Description |
| --- | --- | --- | --- | ---  |
| `import_date` | TIMESTAMP | Not null | `CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP` |   |
| `file_name` | VARCHAR(54) | Not null | `' '` |   |
| `trx_date` | VARCHAR(8) | Not null | `' '` |   |
| `trx_time` | VARCHAR(6) | Not null | `' '` |   |
| `card_no` | VARCHAR(50) | Not null | `' '` |   |
| `txn_no` | VARCHAR(6) | Not null | `''` |   |
| `trx_amt` | INT |  | `'0'` |   |
| `device_id` | VARCHAR(10) |  | `' '` |   |
| `trx_type` | VARCHAR(2) |  | `NULL` |   |
| `trx_sub_type` | VARCHAR(2) |  | `NULL` |   |
| `el_value` | INT |  | `'0'` |   |
| `cal_date` | VARCHAR(8) |  | `' '` |   |
| `cal_status` | VARCHAR(2) |  | `' '` |   |
| `dept_id` | VARCHAR(10) | Not null | `'00'` |   |
| `unit_id` | VARCHAR(2) | Not null | `'02'` |   |
| `cal_err_code` | VARCHAR(10) | Not null | `''` |   |
| `update_date` | DATETIME |  | `NULL` |   |
| `source_filename` | VARCHAR(100) |  | `NULL` |   |
| `garage_code` | VARCHAR(20) |  | `NULL` |   |
| `csv_file_date` | VARCHAR(20) |  | `NULL` |   |
| `trx_data_id` | BIGINT | PRIMARY, Auto increments, Not null, Unique |   |   |
| `create_date` | TIMESTAMP | Not null | `'0000-00-00 00:00:00'` |   |


### Indices: 

| Name | Columns | Type | Description |
| --- | --- | --- | --- |
| PRIMARY | `trx_data_id` | PRIMARY |   |
| trx_data_id | `trx_data_id` | UNIQUE |   |


